
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/GameLayer.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'f6877zzju5LDIMfpNDRlSIv', 'GameLayer');
// Script/GameLayer.js

"use strict";

var spriteCreator = require("spriteCreator");

var ConfirmDialogPrefab = require("CommonDialg");

var StorageManager = require("storageManager");

var self = null;
cc.Class({
  "extends": cc.Component,
  properties: {
    landRange: cc.v2(20, 300),
    landWidth: cc.v2(20, 200),
    hero: cc.Node,
    firstLand: cc.Node,
    secondLand: cc.Node,
    canvas: cc.Node,
    moveDuration: 0.5,
    stickSpeed: 400,
    heroMoveSpeed: 400,
    stickWidth: 6,
    isTouchStart: false,
    score: cc.Label,
    highScore: cc.Label,
    perfectTips: cc.Label
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    cc.log("onLoad ()");
    self = this;
    this.runLength = 0;
    this.currentLandRange = 0;
    this.heroWorldPosX = 0;
    this.heroMoveX = 0;
    this.scoreNum = 0;
    this.winSize = cc.director.getWinSize();
    this.highScoreNum = StorageManager.getHighestScore();
    this.highScore.string = "最高得分:" + this.highScoreNum;
    this.exitDialog = false; // this.perfectTips.node.active = true;
    //注册触摸监听事件

    this.registerEvent(); //创建一个新的陆地

    this.createNewLand();
    var curRange = this.getLandRange();
    this.secondLand.setPosition(curRange, 0); //角色位置

    this.heroWorldPosX = this.firstLand.width - (1 - this.hero.anchorX) * this.hero.width - this.stickWidth;
    this.hero.x = this.heroWorldPosX; //棍子位置

    this.stick = this.createStick();
    this.stick.x = this.hero.x + this.hero.width * (1 - this.hero.anchorX) + this.stick.width * this.stick.anchorX;
  },
  start: function start() {
    cc.log("start ()");
  },
  registerEvent: function registerEvent() {
    //触摸事件
    this.canvas.on(cc.Node.EventType.TOUCH_START, this.touchStart.bind(this), this.node);
    this.canvas.on(cc.Node.EventType.TOUCH_END, this.touchEnd.bind(this), this.node);
    this.canvas.on(cc.Node.EventType.TOUCH_CANCEL, this.touchCancel.bind(this), this.node); //键盘事件

    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);
    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);
    console.log("on");
  },
  unregisterEvent: function unregisterEvent() {
    this.canvas.targetOff(this.node);
    cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);
    cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);
    console.log("off");
  },
  touchStart: function touchStart(event) {
    // fsm.stickLengthen();
    cc.log("touchStart");
    this.isTouchStart = true;
    return false;
  },
  touchEnd: function touchEnd(event) {
    // fsm.heroTick();
    cc.log("touchEnd");
    this.isTouchStart = false;
    this.StickFall();
  },
  touchCancel: function touchCancel() {
    // this.touchEnd();
    cc.log("touchCancel");
    this.isTouchStart = false;
  },
  onKeyDown: function onKeyDown() {
    cc.log("keyDown:" + event.keyCode);

    switch (event.keyCode) {
      case cc.KEY.backspace:
        var callFuncYes = function callFuncYes() {
          cc.director.end();
        };

        var callFuncNo = function callFuncNo() {
          // cc.director.loadScene('gameScene');
          self.exitDialog = false;
        };

        if (!self.exitDialog) {
          self.exitDialog = true;
          self.showDialog("通知", "是否退出游戏!", "是", callFuncYes, "", callFuncNo);
        }

        break;
    }
  },
  onKeyUp: function onKeyUp() {
    cc.log("keyUp");

    switch (event.keyCode) {
      case cc.KEY.backspace:
        break;
    }
  },
  createNewLand: function createNewLand() {
    cc.log(">>>createNewLand");
    this.secondLand = spriteCreator.createNewLand(this.getLandWidth());
    this.secondLand.parent = this.node;
  },
  getLandRange: function getLandRange() {
    var winSize = cc.director.getWinSize();
    this.currentLandRange = 50 + (winSize.width - this.secondLand.width) * Math.random();

    if (winSize.width < this.currentLandRange + this.secondLand.width) {
      this.currentLandRange = winSize.width - this.secondLand.width - 50;
    }

    return this.currentLandRange;
  },
  getLandWidth: function getLandWidth() {
    var landWidth = this.landWidth.x + (this.landWidth.y - this.landWidth.x) * Math.random();

    if (landWidth < 30) {
      landWidth = 30;
    }

    return landWidth;
  },
  createStick: function createStick() {
    cc.log("createStick");
    var stick = spriteCreator.createStick(this.stickWidth);
    stick.parent = this.node;
    return stick;
  },
  update: function update(dt) {
    if (this.isTouchStart) {
      // cc.log(">>>>>>>> dt");
      this.stick.height += dt * this.stickSpeed;
    }
  },
  //英雄移动
  HeroMoved: function HeroMoved() {
    cc.log(">>>>HeroMoved");
    this.heroMoveX = this.stick.height;
    var time = this.heroMoveX / this.heroMoveSpeed;
    var heroMove = cc.moveBy(time, cc.v2(this.heroMoveX, 0));
    var callFunc = cc.callFunc(function () {
      cc.log("成功失败判定");
      self.isSuccess();
    });
    var se = cc.sequence(heroMove, callFunc);
    this.hero.runAction(se);
  },
  //棍子掉落
  StickFall: function StickFall() {
    this.unregisterEvent();
    var stickFall = cc.rotateBy(0.5, 90);
    stickFall.easing(cc.easeIn(3));
    var callFunc = cc.callFunc(function () {
      cc.log("hero move");
      self.HeroMoved();
    });
    var se = cc.sequence(stickFall, callFunc);
    this.stick.runAction(se);
    this.stickHeight = this.stick.height;
  },
  //成功失败判定
  isSuccess: function isSuccess() {
    var minLength = this.secondLand.x - this.firstLand.x - this.firstLand.width + 2;
    var maxLength = this.secondLand.x - this.firstLand.x + this.secondLand.width - this.firstLand.width + 5;
    cc.log(">>>minLength:" + minLength + ">>>maxLength:" + maxLength + " height:" + this.stickHeight);

    if (this.stickHeight > minLength && this.stickHeight < maxLength) {
      cc.log(">>>Success"); //完美距离判定

      var middleLength = maxLength - this.secondLand.width / 2;

      if (this.stickHeight > middleLength - 6 && this.stickHeight < middleLength + 3) {
        this.scoreNum = this.scoreNum + 2;
        this.score.string = "得分:" + this.scoreNum;
        this.perfectTips.node.active = true;
        var callFunc = cc.callFunc(function () {
          self.perfectTips.node.active = false;
        });
        var seq = cc.sequence(cc.delayTime(1.0), callFunc);
        this.perfectTips.node.runAction(seq);
      } else {
        this.scoreNum = this.scoreNum + 1;
        this.score.string = "得分:" + this.scoreNum;
      }

      this.Next();
    } else {
      cc.log(">>>failed");
      this.GameOver();
    }
  },
  Next: function Next() {
    var winSize = cc.director.getWinSize();
    cc.log("currentLandRange:" + this.currentLandRange);
    var length = this.currentLandRange + this.secondLand.width - 30;
    this.runLength += length;
    var action = cc.moveBy(this.moveDuration, cc.v2(-length, 0));
    this.node.runAction(action);
    this.firstLand = this.secondLand;
    this.createNewLand();
    this.stick.height = 0;
    var stickFall = cc.rotateBy(0.1, -90);
    this.stick.runAction(stickFall); //landRange

    var range = this.getLandRange();
    var callFunc = cc.callFunc(function () {
      self.hero.x = self.runLength + 10;
      self.stick.x = self.hero.x + self.hero.width * (1 - self.hero.anchorX) + self.stick.width * self.stick.anchorX;
      self.registerEvent();
    }); //secondland;

    this.secondLand.setPosition(this.runLength + winSize.width, 0);
    var l = winSize.width - range;
    var secondAction = cc.moveBy(this.moveDuration, cc.v2(-l, 0));
    var seq = cc.sequence(secondAction, callFunc);
    this.secondLand.runAction(seq);
  },
  GameOver: function GameOver() {
    if (this.highScoreNum < this.scoreNum) {
      this.highScoreNum = this.scoreNum;
      StorageManager.setHighestScore(this.highScoreNum);
      this.highScore.string = "最高得分:" + this.highScoreNum;
    }

    var stickFall = cc.rotateBy(0.5, 90);
    stickFall.easing(cc.easeIn(3));
    this.stick.runAction(stickFall);
    var action = cc.moveBy(0.5, cc.v2(0, -350));
    action.easing(cc.easeIn(3));
    this.hero.runAction(action);

    var reStarGame = function reStarGame() {
      cc.director.loadScene('gameScene');
    };

    var exitGame = function exitGame() {
      cc.director.end();
    };

    this.showDialog("通知", "游戏失败!", "再来一次", reStarGame, "", exitGame);
  },
  // 弹出一个确认框
  showDialog: function showDialog(title, content, btn1Str, btn1Cb, btn2Str, btn2Cb) {
    cc.log("showDialog "); // 加载 Prefab

    cc.loader.loadRes("CommonDialg", function (err, prefab) {
      if (err) {
        cc.log(err);
        return;
      }

      var newNode = cc.instantiate(prefab);
      cc.director.getScene().addChild(newNode);
      newNode.getComponent(ConfirmDialogPrefab).show(title, content, btn1Str, btn1Cb, btn2Str, btn2Cb);
    });
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxHYW1lTGF5ZXIuanMiXSwibmFtZXMiOlsic3ByaXRlQ3JlYXRvciIsInJlcXVpcmUiLCJDb25maXJtRGlhbG9nUHJlZmFiIiwiU3RvcmFnZU1hbmFnZXIiLCJzZWxmIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJsYW5kUmFuZ2UiLCJ2MiIsImxhbmRXaWR0aCIsImhlcm8iLCJOb2RlIiwiZmlyc3RMYW5kIiwic2Vjb25kTGFuZCIsImNhbnZhcyIsIm1vdmVEdXJhdGlvbiIsInN0aWNrU3BlZWQiLCJoZXJvTW92ZVNwZWVkIiwic3RpY2tXaWR0aCIsImlzVG91Y2hTdGFydCIsInNjb3JlIiwiTGFiZWwiLCJoaWdoU2NvcmUiLCJwZXJmZWN0VGlwcyIsIm9uTG9hZCIsImxvZyIsInJ1bkxlbmd0aCIsImN1cnJlbnRMYW5kUmFuZ2UiLCJoZXJvV29ybGRQb3NYIiwiaGVyb01vdmVYIiwic2NvcmVOdW0iLCJ3aW5TaXplIiwiZGlyZWN0b3IiLCJnZXRXaW5TaXplIiwiaGlnaFNjb3JlTnVtIiwiZ2V0SGlnaGVzdFNjb3JlIiwic3RyaW5nIiwiZXhpdERpYWxvZyIsInJlZ2lzdGVyRXZlbnQiLCJjcmVhdGVOZXdMYW5kIiwiY3VyUmFuZ2UiLCJnZXRMYW5kUmFuZ2UiLCJzZXRQb3NpdGlvbiIsIndpZHRoIiwiYW5jaG9yWCIsIngiLCJzdGljayIsImNyZWF0ZVN0aWNrIiwic3RhcnQiLCJvbiIsIkV2ZW50VHlwZSIsIlRPVUNIX1NUQVJUIiwidG91Y2hTdGFydCIsImJpbmQiLCJub2RlIiwiVE9VQ0hfRU5EIiwidG91Y2hFbmQiLCJUT1VDSF9DQU5DRUwiLCJ0b3VjaENhbmNlbCIsInN5c3RlbUV2ZW50IiwiU3lzdGVtRXZlbnQiLCJLRVlfRE9XTiIsIm9uS2V5RG93biIsIktFWV9VUCIsIm9uS2V5VXAiLCJjb25zb2xlIiwidW5yZWdpc3RlckV2ZW50IiwidGFyZ2V0T2ZmIiwib2ZmIiwiZXZlbnQiLCJTdGlja0ZhbGwiLCJrZXlDb2RlIiwiS0VZIiwiYmFja3NwYWNlIiwiY2FsbEZ1bmNZZXMiLCJlbmQiLCJjYWxsRnVuY05vIiwic2hvd0RpYWxvZyIsImdldExhbmRXaWR0aCIsInBhcmVudCIsIk1hdGgiLCJyYW5kb20iLCJ5IiwidXBkYXRlIiwiZHQiLCJoZWlnaHQiLCJIZXJvTW92ZWQiLCJ0aW1lIiwiaGVyb01vdmUiLCJtb3ZlQnkiLCJjYWxsRnVuYyIsImlzU3VjY2VzcyIsInNlIiwic2VxdWVuY2UiLCJydW5BY3Rpb24iLCJzdGlja0ZhbGwiLCJyb3RhdGVCeSIsImVhc2luZyIsImVhc2VJbiIsInN0aWNrSGVpZ2h0IiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwibWlkZGxlTGVuZ3RoIiwiYWN0aXZlIiwic2VxIiwiZGVsYXlUaW1lIiwiTmV4dCIsIkdhbWVPdmVyIiwibGVuZ3RoIiwiYWN0aW9uIiwicmFuZ2UiLCJsIiwic2Vjb25kQWN0aW9uIiwic2V0SGlnaGVzdFNjb3JlIiwicmVTdGFyR2FtZSIsImxvYWRTY2VuZSIsImV4aXRHYW1lIiwidGl0bGUiLCJjb250ZW50IiwiYnRuMVN0ciIsImJ0bjFDYiIsImJ0bjJTdHIiLCJidG4yQ2IiLCJsb2FkZXIiLCJsb2FkUmVzIiwiZXJyIiwicHJlZmFiIiwibmV3Tm9kZSIsImluc3RhbnRpYXRlIiwiZ2V0U2NlbmUiLCJhZGRDaGlsZCIsImdldENvbXBvbmVudCIsInNob3ciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsSUFBSUEsYUFBYSxHQUFHQyxPQUFPLENBQUMsZUFBRCxDQUEzQjs7QUFDQSxJQUFJQyxtQkFBbUIsR0FBR0QsT0FBTyxDQUFDLGFBQUQsQ0FBakM7O0FBQ0EsSUFBSUUsY0FBYyxHQUFHRixPQUFPLENBQUMsZ0JBQUQsQ0FBNUI7O0FBR0EsSUFBSUcsSUFBSSxHQUFHLElBQVg7QUFFQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxF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OFFhQyxPQTlRYixFQThRc0JDLE9BOVF0QixFQThRK0JDLE1BOVEvQixFQThRdUNDLE9BOVF2QyxFQThRZ0RDLE1BOVFoRCxFQThRdUQ7QUFDeER2SCxJQUFBQSxFQUFFLENBQUNzQixHQUFILENBQU8sYUFBUCxFQUR3RCxDQUV4RDs7QUFDQXRCLElBQUFBLEVBQUUsQ0FBQ3dILE1BQUgsQ0FBVUMsT0FBVixDQUFrQixhQUFsQixFQUFpQyxVQUFVQyxHQUFWLEVBQWVDLE1BQWYsRUFBdUI7QUFDcEQsVUFBSUQsR0FBSixFQUFTO0FBQ0wxSCxRQUFBQSxFQUFFLENBQUNzQixHQUFILENBQU9vRyxHQUFQO0FBQ0E7QUFDSDs7QUFDRCxVQUFJRSxPQUFPLEdBQUc1SCxFQUFFLENBQUM2SCxXQUFILENBQWVGLE1BQWYsQ0FBZDtBQUNBM0gsTUFBQUEsRUFBRSxDQUFDNkIsUUFBSCxDQUFZaUcsUUFBWixHQUF1QkMsUUFBdkIsQ0FBZ0NILE9BQWhDO0FBQ0FBLE1BQUFBLE9BQU8sQ0FBQ0ksWUFBUixDQUFxQm5JLG1CQUFyQixFQUEwQ29JLElBQTFDLENBQStDZixLQUEvQyxFQUFzREMsT0FBdEQsRUFBK0RDLE9BQS9ELEVBQXdFQyxNQUF4RSxFQUFnRkMsT0FBaEYsRUFBeUZDLE1BQXpGO0FBQ0gsS0FSRDtBQVNIO0FBMVJJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgc3ByaXRlQ3JlYXRvciA9IHJlcXVpcmUoXCJzcHJpdGVDcmVhdG9yXCIpO1xyXG52YXIgQ29uZmlybURpYWxvZ1ByZWZhYiA9IHJlcXVpcmUoXCJDb21tb25EaWFsZ1wiKTtcclxudmFyIFN0b3JhZ2VNYW5hZ2VyID0gcmVxdWlyZShcInN0b3JhZ2VNYW5hZ2VyXCIpO1xyXG5cclxuXHJcbnZhciBzZWxmID0gbnVsbDtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbGFuZFJhbmdlOmNjLnYyKDIwLDMwMCksXHJcbiAgICAgICAgbGFuZFdpZHRoOmNjLnYyKDIwLDIwMCksXHJcbiAgICAgICAgaGVybzpjYy5Ob2RlLFxyXG4gICAgICAgIGZpcnN0TGFuZDpjYy5Ob2RlLFxyXG4gICAgICAgIHNlY29uZExhbmQ6Y2MuTm9kZSxcclxuICAgICAgICBjYW52YXM6Y2MuTm9kZSwgIFxyXG4gICAgICAgIG1vdmVEdXJhdGlvbjowLjUsXHJcbiAgICAgICAgc3RpY2tTcGVlZDo0MDAsXHJcbiAgICAgICAgaGVyb01vdmVTcGVlZDo0MDAsXHJcbiAgICAgICAgc3RpY2tXaWR0aDo2LFxyXG4gICAgICAgIGlzVG91Y2hTdGFydDpmYWxzZSxcclxuICAgICAgICBzY29yZTpjYy5MYWJlbCxcclxuICAgICAgICBoaWdoU2NvcmU6Y2MuTGFiZWwsXHJcbiAgICAgICAgcGVyZmVjdFRpcHM6Y2MuTGFiZWwsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIExJRkUtQ1lDTEUgQ0FMTEJBQ0tTOlxyXG5cclxuICAgIG9uTG9hZCAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwib25Mb2FkICgpXCIpO1xyXG5cclxuICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLnJ1bkxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGFuZFJhbmdlID0gMDtcclxuICAgICAgICB0aGlzLmhlcm9Xb3JsZFBvc1ggPSAwO1xyXG4gICAgICAgIHRoaXMuaGVyb01vdmVYID0gMDsgXHJcbiAgICAgICAgdGhpcy5zY29yZU51bSA9IDA7XHJcbiAgICAgICAgdGhpcy53aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5oaWdoU2NvcmVOdW0gPSBTdG9yYWdlTWFuYWdlci5nZXRIaWdoZXN0U2NvcmUoKTtcclxuICAgICAgICB0aGlzLmhpZ2hTY29yZS5zdHJpbmcgPSBcIuacgOmrmOW+l+WIhjpcIit0aGlzLmhpZ2hTY29yZU51bTtcclxuICAgICAgICB0aGlzLmV4aXREaWFsb2cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy5wZXJmZWN0VGlwcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIC8v5rOo5YaM6Kem5pG455uR5ZCs5LqL5Lu2XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICAgICAgLy/liJvlu7rkuIDkuKrmlrDnmoTpmYblnLBcclxuICAgICAgICB0aGlzLmNyZWF0ZU5ld0xhbmQoKTtcclxuICAgICAgICB2YXIgY3VyUmFuZ2UgPSB0aGlzLmdldExhbmRSYW5nZSgpO1xyXG4gICAgICAgIHRoaXMuc2Vjb25kTGFuZC5zZXRQb3NpdGlvbihjdXJSYW5nZSwwKTtcclxuXHJcbiAgICAgICAgLy/op5LoibLkvY3nva5cclxuICAgICAgICB0aGlzLmhlcm9Xb3JsZFBvc1ggPSB0aGlzLmZpcnN0TGFuZC53aWR0aCAtICgxLXRoaXMuaGVyby5hbmNob3JYKSAqIHRoaXMuaGVyby53aWR0aCAtIHRoaXMuc3RpY2tXaWR0aDtcclxuICAgICAgICB0aGlzLmhlcm8ueCA9IHRoaXMuaGVyb1dvcmxkUG9zWFxyXG5cclxuICAgICAgICAvL+ajjeWtkOS9jee9rlxyXG4gICAgICAgIHRoaXMuc3RpY2sgPSB0aGlzLmNyZWF0ZVN0aWNrKCk7XHJcbiAgICAgICAgdGhpcy5zdGljay54ID0gdGhpcy5oZXJvLnggKyB0aGlzLmhlcm8ud2lkdGggKiAoMS10aGlzLmhlcm8uYW5jaG9yWCkgKyB0aGlzLnN0aWNrLndpZHRoICogdGhpcy5zdGljay5hbmNob3JYO1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwic3RhcnQgKClcIik7XHJcbiAgICB9LFxyXG4gICAgcmVnaXN0ZXJFdmVudCgpe1xyXG4gICAgICAgIC8v6Kem5pG45LqL5Lu2XHJcbiAgICAgICAgdGhpcy5jYW52YXMub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMudG91Y2hTdGFydC5iaW5kKHRoaXMpLCB0aGlzLm5vZGUpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCx0aGlzLnRvdWNoRW5kLmJpbmQodGhpcyksIHRoaXMubm9kZSk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfQ0FOQ0VMLHRoaXMudG91Y2hDYW5jZWwuYmluZCh0aGlzKSwgdGhpcy5ub2RlKTtcclxuXHJcbiAgICAgICAgLy/plK7nm5jkuovku7ZcclxuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sIHRoaXMub25LZXlEb3duLCB0aGlzKTtcclxuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vbihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX1VQLCB0aGlzLm9uS2V5VXAsIHRoaXMpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwib25cIik7XHJcbiAgICB9LFxyXG4gICAgdW5yZWdpc3RlckV2ZW50KCl7XHJcbiAgICAgICAgdGhpcy5jYW52YXMudGFyZ2V0T2ZmKHRoaXMubm9kZSk7XHJcblxyXG4gICAgICAgIGNjLnN5c3RlbUV2ZW50Lm9mZihjYy5TeXN0ZW1FdmVudC5FdmVudFR5cGUuS0VZX0RPV04sIHRoaXMub25LZXlEb3duLCB0aGlzKTtcclxuICAgICAgICBjYy5zeXN0ZW1FdmVudC5vZmYoY2MuU3lzdGVtRXZlbnQuRXZlbnRUeXBlLktFWV9VUCwgdGhpcy5vbktleVVwLCB0aGlzKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIm9mZlwiKTtcclxuICAgIH0sXHJcbiAgICB0b3VjaFN0YXJ0KGV2ZW50KXtcclxuICAgICAgICAvLyBmc20uc3RpY2tMZW5ndGhlbigpO1xyXG4gICAgICAgIGNjLmxvZyhcInRvdWNoU3RhcnRcIik7XHJcbiAgICAgICAgdGhpcy5pc1RvdWNoU3RhcnQgPSB0cnVlOyBcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgdG91Y2hFbmQoZXZlbnQpe1xyXG4gICAgICAgIC8vIGZzbS5oZXJvVGljaygpO1xyXG4gICAgICAgIGNjLmxvZyhcInRvdWNoRW5kXCIpO1xyXG4gICAgICAgIHRoaXMuaXNUb3VjaFN0YXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5TdGlja0ZhbGwoKTtcclxuICAgIH0sXHJcbiAgICB0b3VjaENhbmNlbCgpe1xyXG4gICAgICAgIC8vIHRoaXMudG91Y2hFbmQoKTtcclxuICAgICAgICBjYy5sb2coXCJ0b3VjaENhbmNlbFwiKTtcclxuICAgICAgICB0aGlzLmlzVG91Y2hTdGFydCA9IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgb25LZXlEb3duKCl7XHJcbiAgICAgICAgY2MubG9nKFwia2V5RG93bjpcIitldmVudC5rZXlDb2RlKTtcclxuICAgICAgICBzd2l0Y2goZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIGNjLktFWS5iYWNrc3BhY2U6XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FsbEZ1bmNZZXMgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsRnVuY05vID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2dhbWVTY2VuZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZXhpdERpYWxvZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGlmKCFzZWxmLmV4aXREaWFsb2cpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZXhpdERpYWxvZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zaG93RGlhbG9nKFwi6YCa55+lXCIsXCLmmK/lkKbpgIDlh7rmuLjmiI8hXCIsXCLmmK9cIixjYWxsRnVuY1llcyxcIlwiLGNhbGxGdW5jTm8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uS2V5VXAoKXtcclxuICAgICAgICBjYy5sb2coXCJrZXlVcFwiKTtcclxuICAgICAgICBzd2l0Y2goZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIGNjLktFWS5iYWNrc3BhY2U6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlTmV3TGFuZCgpIHtcclxuICAgICAgICBjYy5sb2coXCI+Pj5jcmVhdGVOZXdMYW5kXCIpXHJcbiAgICAgICAgdGhpcy5zZWNvbmRMYW5kID0gc3ByaXRlQ3JlYXRvci5jcmVhdGVOZXdMYW5kKHRoaXMuZ2V0TGFuZFdpZHRoKCkpO1xyXG4gICAgICAgIHRoaXMuc2Vjb25kTGFuZC5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICB9LFxyXG4gICAgZ2V0TGFuZFJhbmdlKCl7XHJcbiAgICAgICAgdmFyIHdpblNpemUgPSBjYy5kaXJlY3Rvci5nZXRXaW5TaXplKCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TGFuZFJhbmdlID0gNTArKHdpblNpemUud2lkdGggLSB0aGlzLnNlY29uZExhbmQud2lkdGgpKk1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgaWYod2luU2l6ZS53aWR0aCA8IHRoaXMuY3VycmVudExhbmRSYW5nZSArIHRoaXMuc2Vjb25kTGFuZC53aWR0aCl7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudExhbmRSYW5nZSA9IHdpblNpemUud2lkdGggLSB0aGlzLnNlY29uZExhbmQud2lkdGggLSA1MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudExhbmRSYW5nZTtcclxuICAgIH0sXHJcbiAgICBnZXRMYW5kV2lkdGgoKXtcclxuICAgICAgICB2YXIgbGFuZFdpZHRoID0gdGhpcy5sYW5kV2lkdGgueCArICh0aGlzLmxhbmRXaWR0aC55IC0gdGhpcy5sYW5kV2lkdGgueCkqIE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgaWYobGFuZFdpZHRoPDMwKXtcclxuICAgICAgICAgICAgbGFuZFdpZHRoID0gMzA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsYW5kV2lkdGg7XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlU3RpY2soKXtcclxuICAgICAgICBjYy5sb2coXCJjcmVhdGVTdGlja1wiKTtcclxuICAgICAgICB2YXIgc3RpY2sgPSBzcHJpdGVDcmVhdG9yLmNyZWF0ZVN0aWNrKHRoaXMuc3RpY2tXaWR0aCk7XHJcbiAgICAgICAgc3RpY2sucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgIHJldHVybiBzdGljaztcclxuICAgIH0sXHJcbiAgICB1cGRhdGUgKGR0KSB7XHJcbiAgICAgICAgaWYodGhpcy5pc1RvdWNoU3RhcnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBjYy5sb2coXCI+Pj4+Pj4+PiBkdFwiKTtcclxuICAgICAgICAgICAgdGhpcy5zdGljay5oZWlnaHQgKz0gZHQqdGhpcy5zdGlja1NwZWVkO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+iLsembhOenu+WKqFxyXG4gICAgSGVyb01vdmVkKCl7XHJcbiAgICAgICAgY2MubG9nKFwiPj4+Pkhlcm9Nb3ZlZFwiKVxyXG5cclxuICAgICAgICB0aGlzLmhlcm9Nb3ZlWCA9IHRoaXMuc3RpY2suaGVpZ2h0XHJcbiAgICAgICAgdmFyIHRpbWUgPSB0aGlzLmhlcm9Nb3ZlWC90aGlzLmhlcm9Nb3ZlU3BlZWQ7XHJcbiAgICAgICAgdmFyIGhlcm9Nb3ZlID0gY2MubW92ZUJ5KHRpbWUsY2MudjIodGhpcy5oZXJvTW92ZVgsMCkpO1xyXG5cclxuICAgICAgICB2YXIgY2FsbEZ1bmMgPSBjYy5jYWxsRnVuYyhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCLmiJDlip/lpLHotKXliKTlrppcIik7XHJcbiAgICAgICAgICAgIHNlbGYuaXNTdWNjZXNzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHNlID1jYy5zZXF1ZW5jZShoZXJvTW92ZSxjYWxsRnVuYyk7XHJcbiAgICAgICAgdGhpcy5oZXJvLnJ1bkFjdGlvbihzZSk7XHJcbiAgICB9LFxyXG4gICAgLy/mo43lrZDmjonokL1cclxuICAgIFN0aWNrRmFsbCgpe1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICAgICAgdmFyIHN0aWNrRmFsbCA9IGNjLnJvdGF0ZUJ5KDAuNSwgOTApO1xyXG4gICAgICAgIHN0aWNrRmFsbC5lYXNpbmcoY2MuZWFzZUluKDMpKTtcclxuICAgICAgICB2YXIgY2FsbEZ1bmMgPSBjYy5jYWxsRnVuYyhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCJoZXJvIG1vdmVcIik7XHJcbiAgICAgICAgICAgIHNlbGYuSGVyb01vdmVkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHNlID1jYy5zZXF1ZW5jZShzdGlja0ZhbGwsY2FsbEZ1bmMpO1xyXG4gICAgICAgIHRoaXMuc3RpY2sucnVuQWN0aW9uKHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGlja0hlaWdodCA9IHRoaXMuc3RpY2suaGVpZ2h0O1xyXG4gICAgfSxcclxuICAgIC8v5oiQ5Yqf5aSx6LSl5Yik5a6aXHJcbiAgICBpc1N1Y2Nlc3MoKXtcclxuICAgICAgICB2YXIgbWluTGVuZ3RoID0gdGhpcy5zZWNvbmRMYW5kLnggLSB0aGlzLmZpcnN0TGFuZC54IC0gdGhpcy5maXJzdExhbmQud2lkdGgrMjtcclxuICAgICAgICB2YXIgbWF4TGVuZ3RoID0gdGhpcy5zZWNvbmRMYW5kLnggLSB0aGlzLmZpcnN0TGFuZC54ICsgdGhpcy5zZWNvbmRMYW5kLndpZHRoIC0gdGhpcy5maXJzdExhbmQud2lkdGgrNTtcclxuXHJcbiAgICAgICAgY2MubG9nKFwiPj4+bWluTGVuZ3RoOlwiK21pbkxlbmd0aCtcIj4+Pm1heExlbmd0aDpcIittYXhMZW5ndGgrXCIgaGVpZ2h0OlwiK3RoaXMuc3RpY2tIZWlnaHQpO1xyXG5cclxuICAgICAgICBpZih0aGlzLnN0aWNrSGVpZ2h0ID4gbWluTGVuZ3RoICYmIHRoaXMuc3RpY2tIZWlnaHQgPCBtYXhMZW5ndGgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYy5sb2coXCI+Pj5TdWNjZXNzXCIpXHJcbiAgICAgICAgICAgIC8v5a6M576O6Led56a75Yik5a6aXHJcbiAgICAgICAgICAgIHZhciBtaWRkbGVMZW5ndGggPSBtYXhMZW5ndGggLSB0aGlzLnNlY29uZExhbmQud2lkdGgvMjtcclxuICAgICAgICAgICAgaWYodGhpcy5zdGlja0hlaWdodCA+IChtaWRkbGVMZW5ndGggLSA2KSAmJiB0aGlzLnN0aWNrSGVpZ2h0IDwgKG1pZGRsZUxlbmd0aCArIDMpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmVOdW0gPSB0aGlzLnNjb3JlTnVtICsgMjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmUuc3RyaW5nID0gXCLlvpfliIY6XCIrdGhpcy5zY29yZU51bTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZlY3RUaXBzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHZhciBjYWxsRnVuYyA9IGNjLmNhbGxGdW5jKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wZXJmZWN0VGlwcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VxID1jYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoMS4wKSxjYWxsRnVuYyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZlY3RUaXBzLm5vZGUucnVuQWN0aW9uKHNlcSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZU51bSA9IHRoaXMuc2NvcmVOdW0gKyAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZS5zdHJpbmcgPSBcIuW+l+WIhjpcIit0aGlzLnNjb3JlTnVtO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLk5leHQoKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY2MubG9nKFwiPj4+ZmFpbGVkXCIpXHJcbiAgICAgICAgICAgIHRoaXMuR2FtZU92ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgTmV4dCgpe1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcImN1cnJlbnRMYW5kUmFuZ2U6XCIrdGhpcy5jdXJyZW50TGFuZFJhbmdlKVxyXG4gICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmN1cnJlbnRMYW5kUmFuZ2UgKyB0aGlzLnNlY29uZExhbmQud2lkdGggLSAzMDtcclxuICAgICAgICB0aGlzLnJ1bkxlbmd0aCArPWxlbmd0aDtcclxuICAgICAgICB2YXIgYWN0aW9uID0gY2MubW92ZUJ5KHRoaXMubW92ZUR1cmF0aW9uLGNjLnYyKC1sZW5ndGgsMCkpO1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oYWN0aW9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5maXJzdExhbmQgPSB0aGlzLnNlY29uZExhbmQ7XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlTmV3TGFuZCgpO1xyXG5cclxuICAgICAgICB0aGlzLnN0aWNrLmhlaWdodCA9IDA7XHJcbiAgICAgICAgdmFyIHN0aWNrRmFsbCA9IGNjLnJvdGF0ZUJ5KDAuMSwgLTkwKTtcclxuICAgICAgICB0aGlzLnN0aWNrLnJ1bkFjdGlvbihzdGlja0ZhbGwpO1xyXG5cclxuICAgICAgICAvL2xhbmRSYW5nZVxyXG4gICAgICAgIHZhciByYW5nZSA9IHRoaXMuZ2V0TGFuZFJhbmdlKCk7XHJcblxyXG4gICAgICAgIHZhciBjYWxsRnVuYyA9IGNjLmNhbGxGdW5jKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNlbGYuaGVyby54ID0gc2VsZi5ydW5MZW5ndGgrMTA7XHJcbiAgICAgICAgICAgIHNlbGYuc3RpY2sueCA9IHNlbGYuaGVyby54ICsgc2VsZi5oZXJvLndpZHRoICogKDEtc2VsZi5oZXJvLmFuY2hvclgpICsgc2VsZi5zdGljay53aWR0aCAqIHNlbGYuc3RpY2suYW5jaG9yWDtcclxuICAgICAgICAgICAgc2VsZi5yZWdpc3RlckV2ZW50KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vc2Vjb25kbGFuZDtcclxuICAgICAgICB0aGlzLnNlY29uZExhbmQuc2V0UG9zaXRpb24odGhpcy5ydW5MZW5ndGgrd2luU2l6ZS53aWR0aCwwKTtcclxuICAgICAgICB2YXIgbCA9IHdpblNpemUud2lkdGggLSByYW5nZTtcclxuICAgICAgICB2YXIgc2Vjb25kQWN0aW9uID0gY2MubW92ZUJ5KHRoaXMubW92ZUR1cmF0aW9uLGNjLnYyKC1sLDApKTtcclxuICAgICAgICB2YXIgc2VxID1jYy5zZXF1ZW5jZShzZWNvbmRBY3Rpb24sY2FsbEZ1bmMpO1xyXG4gICAgICAgIHRoaXMuc2Vjb25kTGFuZC5ydW5BY3Rpb24oc2VxKTtcclxuICAgIH0sXHJcbiAgICBHYW1lT3Zlcigpe1xyXG5cclxuICAgICAgICBpZih0aGlzLmhpZ2hTY29yZU51bSA8IHRoaXMuc2NvcmVOdW0pe1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hTY29yZU51bSA9IHRoaXMuc2NvcmVOdW07XHJcbiAgICAgICAgICAgIFN0b3JhZ2VNYW5hZ2VyLnNldEhpZ2hlc3RTY29yZSh0aGlzLmhpZ2hTY29yZU51bSk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaFNjb3JlLnN0cmluZyA9IFwi5pyA6auY5b6X5YiGOlwiK3RoaXMuaGlnaFNjb3JlTnVtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHN0aWNrRmFsbCA9IGNjLnJvdGF0ZUJ5KDAuNSwgOTApO1xyXG4gICAgICAgIHN0aWNrRmFsbC5lYXNpbmcoY2MuZWFzZUluKDMpKTtcclxuICAgICAgICB0aGlzLnN0aWNrLnJ1bkFjdGlvbihzdGlja0ZhbGwpO1xyXG4gICAgICAgIHZhciBhY3Rpb24gPSBjYy5tb3ZlQnkoMC41LGNjLnYyKDAsLTM1MCkpO1xyXG4gICAgICAgIGFjdGlvbi5lYXNpbmcoY2MuZWFzZUluKDMpKTtcclxuICAgICAgICB0aGlzLmhlcm8ucnVuQWN0aW9uKGFjdGlvbik7XHJcblxyXG4gICAgICAgIHZhciByZVN0YXJHYW1lID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdnYW1lU2NlbmUnKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBleGl0R2FtZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2hvd0RpYWxvZyhcIumAmuefpVwiLFwi5ri45oiP5aSx6LSlIVwiLFwi5YaN5p2l5LiA5qyhXCIscmVTdGFyR2FtZSxcIlwiLGV4aXRHYW1lKTtcclxuICAgIH0sXHJcbiAgICAvLyDlvLnlh7rkuIDkuKrnoa7orqTmoYZcclxuICAgIHNob3dEaWFsb2codGl0bGUsIGNvbnRlbnQsIGJ0bjFTdHIsIGJ0bjFDYiwgYnRuMlN0ciwgYnRuMkNiKXtcclxuICAgICAgICBjYy5sb2coXCJzaG93RGlhbG9nIFwiKTtcclxuICAgICAgICAvLyDliqDovb0gUHJlZmFiXHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoXCJDb21tb25EaWFsZ1wiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5ld05vZGUgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmFkZENoaWxkKG5ld05vZGUpO1xyXG4gICAgICAgICAgICBuZXdOb2RlLmdldENvbXBvbmVudChDb25maXJtRGlhbG9nUHJlZmFiKS5zaG93KHRpdGxlLCBjb250ZW50LCBidG4xU3RyLCBidG4xQ2IsIGJ0bjJTdHIsIGJ0bjJDYik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbiJdfQ==